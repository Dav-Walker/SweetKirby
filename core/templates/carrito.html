{% load static %}
<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Play&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="{% static 'core/estilo.css' %}">
</head>

<body>
    {% include 'header.html' %}

    <h1>Carrito de Compras</h1>
    
    
 


    <section>
        <div id="banner2">
            <div class="menu-carrito">
                <div id=titulo-carro>
                    <img src="{% static 'core/carritorosa.png' %}" alt="carrito rosado">
                    <h1>Carrito de compras</h1>
                </div>
    {% if carrito|length > 0 %}
    <div id="tabla"> 
        <table>
        <thead>
            <tr>
                <th>imagen</th>
                <th>Nombre</th>
                <th>Precio</th>
                <th>Cantidad</th>
                <th>Total</th>
                <th>Categoria</th>
                <th>Eliminar</th>
            </tr>
        </thead>
        <tbody>
            {% for item in carrito %}
                <tr>
                    <td><img class="product-image" src="{{ item.imagen }}" alt="{{ item.nombre }}"></td>
                    <td>{{ item.nombre }}</td>
                    <td>{{ item.precio }}</td>
                    <td>{{ item.cantidad }}</td>
                    <td>{{ item.total }}</td> 
                    <td>{{ item.categoria }}</td>
                    <td><a href="{% url 'delToCart' item.codigo %}" Class="addCart">Eliminar</a></td>
                </tr>
            {% endfor %}
        </tbody>
    </table>

    <p>Total de ítems: {{ request.session.items }}</p>

    {% else %}
    <h2>Tu carrito esta vacio!</h2>
    {% endif %}
    </div>
            </div>
            <div class="resumen-carrito">
                <div class="contenido-resumen">
                    <h1>Resumen de tu pedido</h1>
                    <h2>1 Producto</h2>
                </div>
                <div class="contenido-resumen2">
                    <form action="{% url 'aplicar_descuento' %}" method="post">
                        {% csrf_token %}
                        <div class="input-group clase-input-boton">
                            <input type="text" class="input-promo form-control" name="codigo_promocional" placeholder="Código promocional"
                                aria-label="Recipient's username" aria-describedby="button-addon2">
                            <button class="btn btn-primary" type="submit" id="button-addon2">Aplicar</button>
                        </div>
                    </form>
                </div>
                <div class="contenido-resumen3">
                    <div class="precio-total">
                        <h2>Total:</h2>
                        <h1>${{ total_carrito }}</h1>
                    </div>
                    <div class="boton-pago">
                        <button type="button" class="btn btn-primary">Pagar</button>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <footer id="footer">
        <div class="footer">
            <div class="row">
                <a href="#"><i class="bi bi-instagram"></i></a>
                <a href="#"><i class="bi bi-facebook"></i></a>
                <a href="#"><i class="bi bi-whatsapp"></i></a>
                <a href="#"><i class="bi bi-messenger"></i></a>
            </div>
    
            <div class="row">
                <ul>
                    <li><a href="/#footer">Contacto</a></li> 
                    <li><a href="#">Servicios</a></li>
                    <li><a href="#">Términos y condiciones</a></li>
                    <li><a href="#">Nuestra Tienda</a></li>
                </ul>
            </div>
    
            <div class="row">
                SweetKirby Copyright © 2024 Misery - All rights reserved
            </div>
        </div>
    </footer>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
    crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
    crossorigin="anonymous"></script>
</body>

</html>